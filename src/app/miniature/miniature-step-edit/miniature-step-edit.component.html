<div>
	editing step number {{ stepIndex + 1 }}
</div>

<hr>
<form *ngIf="stepForm" [formGroup]="stepForm" (submit)="formStepSubmit()" class="step-form">
	<label for="title">
		Step Title
	</label>
	<input type="text" formControlName="title" id="title" required>
	<label for="description">
		Description
	</label>
	<textarea formControlName="description" id="description" required></textarea>
	<button
		[disabled]="stepForm.invalid"
		type="submit"
	>
		Edit Step
	</button>
	<button
		type="button"
		(click)="onCancel()"
	>
		Cancel
	</button>
</form>

<div>
	<div *ngFor="let picture of miniature.steps[stepIndex].pictures">
		<img [src]="picture?.fileUrl" alt="img not found" class="miniature-step__img">
		<button (click)="showDeleteModal(picture._id)">delete</button>
	</div>
</div>

<div>
	<app-image-upload
		[armyId]="this.army._id"
		[miniatureId]="this.miniature._id!"
		[actionType]="'miniature'"
		[stepNumber]="stepIndex"
		(fileUploaded)="fetchData()"
	></app-image-upload>
</div>

<app-confirmation-modal
	*ngIf="pictureIdToDelete"
	[message]="'Are you sure you want to delete this picture?'"
	(confirmed)="onDeleteConfirm(pictureIdToDelete)"
	(cancelled)="onDeleteCancel()"
></app-confirmation-modal>
